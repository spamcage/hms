<!DOCTYPE html>
<html dir="ltr" lang="zh-cmn-hans">

<!-- Mirrored from www.hmailserver.org/viewtopic.php?f=3&t=572&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 19 Mar 2022 14:49:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>hMailServer中文论坛 &bull; 警惕使用afterlogic webmail  有漏洞</title>

<link href="https://www.hmailserver.org/styles/prosilver/theme/print.css" rel="stylesheet">
<link href="https://www.hmailserver.org/styles/prosilver/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>hMailServer中文论坛</h1>
		<p>hMailServer中文论坛于2014年上线,支持开源与共享.hMailServer是一个运行于Windows系统的,基于GPL授权的,免费的,开源的邮件系统。<br /><a href="https://www.hmailserver.org/">https://www.hmailserver.org/</a></p>

		<h2>警惕使用afterlogic webmail  有漏洞</h2>
		<p><a href="https://www.hmailserver.org/viewtopic.php?f=3&amp;t=572">https://www.hmailserver.org/viewtopic.php?f=3&amp;t=572</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">分页： <strong>1</strong> / <strong>1</strong></div>
					<div class="post">
				<h3>警惕使用afterlogic webmail  有漏洞</h3>
				<div class="date">发表于 : <strong>2016年3月16日, 17:13</strong></div>
				<div class="author">由 <strong>Hsia</strong></div>
				<div class="content">AfterLogic WebMail Pro的案例：<br>
根据自己的域名访问这个地址，会看到数据库密码。
<div class="codebox"><p>代码: <a href="#" onclick="selectCode(this); return false;">全选</a></p><pre><code>http://**.**.**.**/data/settings/settings.xml</code></pre></div>
在没有解决漏洞的情况下，建议下架。<br>
<br>
漏洞参考：<br>
<a href="http://www.wooyun.org/bugs/wooyun-2015-0128600" class="postlink">http://www.wooyun.org/bugs/wooyun-2015-0128600</a><br>
<br>
apache 修复方法：<br>
<br>
mail 根目录 新建inc_settings_path.php<br>
放入代码：
<div class="codebox"><p>代码: <a href="#" onclick="selectCode(this); return false;">全选</a></p><pre><code>&lt;?php
$dataPath = '/new/location/of/data';</code></pre></div>

$dataPath = 这里测试了下，填写绝对地址有效。<br>
<br>
然后我还修改了 data下的.htaccess  修改为：
<div class="codebox"><p>代码: <a href="#" onclick="selectCode(this); return false;">全选</a></p><pre><code>location ^~ /data {
 deny all;
}</code></pre></div>

上面的意思是这个data的目录改变了，别人不能访问到。</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: 警惕使用afterlogic webmail  有漏洞</h3>
				<div class="date">发表于 : <strong>2016年5月13日, 17:31</strong></div>
				<div class="author">由 <strong>e09500259c60</strong></div>
				<div class="content">我用的是 nginx ，可以用禁止访问文件的方式屏蔽。
<div class="codebox"><p>代码: <a href="#" onclick="selectCode(this); return false;">全选</a></p><pre><code>location ~ /data/settings/settings.xml {
    return 404;
}</code></pre></div>

IIS怎么设置就不知道了，虽然服务器是windows，但并没用过IIS。</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: 警惕使用afterlogic webmail  有漏洞</h3>
				<div class="date">发表于 : <strong>2016年8月23日, 14:14</strong></div>
				<div class="author">由 <strong>熄灭的火焰</strong></div>
				<div class="content">iis7.5配置web.config。如果有其它规则，就单独挑选中间rules部分<br>
<br>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>
&lt;configuration&gt;<br>
    &lt;system.webServer&gt;<br>
        &lt;rewrite&gt;<br>
            &lt;rules&gt;<br>
                &lt;rule name="data" stopProcessing="true"&gt;<br>
                    &lt;match url="^data*" /&gt;<br>
                    &lt;action type="Redirect" url="<a href="http://mail.xxxx.com/" class="postlink">http://mail.xxxx.com</a>" /&gt;<br>
                &lt;/rule&gt;<br>
            &lt;/rules&gt;<br>
        &lt;/rewrite&gt;<br>
    &lt;/system.webServer&gt;<br>
&lt;/configuration&gt;</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">全部次数是<abbr title="Asia/Shanghai">UTC+08:00</abbr><br />分页： <strong>1</strong> / <strong>1</strong></div>
			<div class="copyright">
				<p>由 <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited 提供支持
				</p>
								<p>Copyright © 2014-2015 <a href="http://www.hmailserver.org/">hMailServer中文论坛</a>
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from www.hmailserver.org/viewtopic.php?f=3&t=572&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 19 Mar 2022 14:49:53 GMT -->
</html>
